<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="MarkBind 2.14.1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JavaFX tutorial part 4 – Using FXML</title>
  <link rel="stylesheet" href="../markbind/css/bootstrap.min.css">
  <link rel="stylesheet" href="../markbind/css/bootstrap-vue.min.css">
  <link rel="stylesheet" href="../markbind/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
  <link rel="stylesheet" href="../markbind/css/octicons.css">
  <link rel="stylesheet" href="../markbind/css/github.min.css">
  <link rel="stylesheet" href="../markbind/css/markbind.css">
  <link rel="stylesheet" href="/guides/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css">
  <link rel="stylesheet" href="../markbind/layouts/default/styles.css">
  <link rel="stylesheet" href="../markbind/css/page-nav.css">
  <link rel="icon" href="/guides/favicon.ico">
</head>

<body data-spy="scroll" data-target="#page-nav" data-offset="100">
  <div id="app">
    <header>
      <navbar placement="top" type="dark" class="temp-navbar">
        <a slot="brand" href="https://se-education.org" title="SE-EDU" class="navbar-brand"><span><span aria-hidden="true" class="fas fa-chevron-circle-left"></span> <strong><strong>SE-EDU</strong></strong></span></a>
        <li><a href="/guides/index.html" class="nav-link"><span><strong>Home</strong></span></a></li>
        <li><a href="/guides/about.html" class="nav-link"><span><strong>About</strong></span></a></li>
        <li><a href="https://github.com/se-edu/guides" class="nav-link"><span><span aria-hidden="true" class="fab fa-github"></span></span></a></li>
        <li slot="right" class="nav-link">
          <form class="navbar-form">
            <searchbar :data="searchData" placeholder="Search this site" :on-hit="searchCallback" menu-align-right></searchbar>
          </form>
        </li>
      </navbar>
    </header>
    <div id="flex-body">

      <div id="content-wrapper">
        <h1 id="guides-for-se-student-projects"><span class="text-dark"><strong><strong>Guides for SE student projects »</strong></strong></span><a class="fa fa-anchor" href="#guides-for-se-student-projects" onclick="event.stopPropagation()"></a></h1>
        <h1 id="javafx-tutorial-part-4-using-fxml">JavaFX tutorial part 4 – Using FXML<a class="fa fa-anchor" href="#javafx-tutorial-part-4-using-fxml" onclick="event.stopPropagation()"></a></h1>
        <p>While we have produced a fully functional prototype, there are a few major problems with our application.</p>
        <ol>
          <li>
            <p>The process of visually enhancing the GUI is long and painful:</p>
            <ul>
              <li>Does the <code>TextField</code> need to be 330px or 325px wide?</li>
              <li>How much padding is enough padding to look good?</li>
            </ul>
            <p>Every small change requires us to rebuild and run the application.</p>
          </li>
          <li>
            <p>Components are heavily dependent on each other:
              Why does <code>Main</code> need to know that <code>DialogBox</code> needs a <code>Label</code>?
              What happens if we change the <code>Label</code> to a custom <code>ColoredLabel</code> in the future?</p>
            <p>We need to minimize the amount of information each control needs to know about another.
              Otherwise, making changes in the future will break existing features.</p>
          </li>
          <li>
            <p>The code is untidy and long:
              Why is all the code in one place?</p>
            <p>The <code>Main</code> class attempts to do it all.
              Code for visual tweaks, listeners and even utility methods are all in one file.
              This makes it difficult to find and make changes to existing code.</p>
          </li>
        </ol>
        <p>FXML is a XML-based language that allows us to define our user interface. Properties of JavaFX objects can be defined in the FXML file. For example:</p>
        <pre><code class="hljs xml"><span> <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"userInput"</span> <span class="hljs-attr">layoutY</span>=<span class="hljs-string">"558.0"</span> <span class="hljs-attr">onAction</span>=<span class="hljs-string">"#handleUserInput"</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">"41.0"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"324.0"</span> <span class="hljs-attr">AnchorPane.bottomAnchor</span>=<span class="hljs-string">"1.0"</span> /&gt;</span><br></span></code></pre>
        <p>The FXML snippet define a TextField similar to the one that we programmatically defined previous in Tutorial 2. Notice how concise FXML is compared to the plain Java version.</p>
        <p>Let's return to Duke and convert it to use FXML instead.</p>
        <h1 id="rebuilding-the-scene-using-fxml">Rebuilding the Scene using FXML<a class="fa fa-anchor" href="#rebuilding-the-scene-using-fxml" onclick="event.stopPropagation()"></a></h1>
        <p>Scene Builder is a tool developed by Oracle and currently maintained by Gluon. It is a What-You-See-Is-What-You-Get GUI creation tool. <a href="https://gluonhq.com/products/scene-builder/#download">Download</a> the appropriate version for your OS and install it.</p>
        <p>Create the following files in <code>src/main/resources/view</code>:</p>
        <p><strong>MainWindow.fxml</strong></p>
        <pre><code class="hljs xml"><span><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br></span><span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.control.Button<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.control.ScrollPane<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.control.TextField<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.layout.AnchorPane<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.layout.VBox<span class="hljs-meta">?&gt;</span></span><br></span><span><br></span><span><span class="hljs-tag">&lt;<span class="hljs-name">AnchorPane</span> <span class="hljs-attr">maxHeight</span>=<span class="hljs-string">"-Infinity"</span> <span class="hljs-attr">maxWidth</span>=<span class="hljs-string">"-Infinity"</span> <span class="hljs-attr">minHeight</span>=<span class="hljs-string">"-Infinity"</span> <span class="hljs-attr">minWidth</span>=<span class="hljs-string">"-Infinity"</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">"600.0"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"400.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://javafx.com/javafx/8.0.171"</span> <span class="hljs-attr">xmlns:fx</span>=<span class="hljs-string">"http://javafx.com/fxml/1"</span> <span class="hljs-attr">fx:controller</span>=<span class="hljs-string">"MainWindow"</span>&gt;</span><br></span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">children</span>&gt;</span><br></span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"userInput"</span> <span class="hljs-attr">layoutY</span>=<span class="hljs-string">"558.0"</span> <span class="hljs-attr">onAction</span>=<span class="hljs-string">"#handleUserInput"</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">"41.0"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"324.0"</span> <span class="hljs-attr">AnchorPane.bottomAnchor</span>=<span class="hljs-string">"1.0"</span> /&gt;</span><br></span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"sendButton"</span> <span class="hljs-attr">layoutX</span>=<span class="hljs-string">"324.0"</span> <span class="hljs-attr">layoutY</span>=<span class="hljs-string">"558.0"</span> <span class="hljs-attr">mnemonicParsing</span>=<span class="hljs-string">"false"</span> <span class="hljs-attr">onAction</span>=<span class="hljs-string">"#handleUserInput"</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">"41.0"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"76.0"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"Send"</span> /&gt;</span><br></span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">ScrollPane</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"scrollPane"</span> <span class="hljs-attr">hbarPolicy</span>=<span class="hljs-string">"NEVER"</span> <span class="hljs-attr">hvalue</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">"557.0"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"400.0"</span> <span class="hljs-attr">vvalue</span>=<span class="hljs-string">"1.0"</span>&gt;</span><br></span><span>      <span class="hljs-tag">&lt;<span class="hljs-name">content</span>&gt;</span><br></span><span>        <span class="hljs-tag">&lt;<span class="hljs-name">VBox</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"dialogContainer"</span> <span class="hljs-attr">prefHeight</span>=<span class="hljs-string">"552.0"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"388.0"</span> /&gt;</span><br></span><span>      <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span><br></span><span>    <span class="hljs-tag">&lt;/<span class="hljs-name">ScrollPane</span>&gt;</span><br></span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">children</span>&gt;</span><br></span><span><span class="hljs-tag">&lt;/<span class="hljs-name">AnchorPane</span>&gt;</span><br></span></code></pre>
        <p><strong>DialogBox.fxml</strong></p>
        <pre><code class="hljs xml"><span><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br></span><span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.geometry.Insets<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.control.Label<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.image.ImageView<span class="hljs-meta">?&gt;</span></span><br></span><span><span class="php"><span class="hljs-meta">&lt;?</span>import javafx.scene.layout.HBox<span class="hljs-meta">?&gt;</span></span><br></span><span><br></span><span><span class="hljs-tag">&lt;<span class="hljs-name">fx:root</span> <span class="hljs-attr">alignment</span>=<span class="hljs-string">"TOP_RIGHT"</span> <span class="hljs-attr">maxHeight</span>=<span class="hljs-string">"1.7976931348623157E308"</span> <span class="hljs-attr">maxWidth</span>=<span class="hljs-string">"1.7976931348623157E308"</span> <span class="hljs-attr">prefWidth</span>=<span class="hljs-string">"400.0"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"javafx.scene.layout.HBox"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://javafx.com/javafx/8.0.171"</span> <span class="hljs-attr">xmlns:fx</span>=<span class="hljs-string">"http://javafx.com/fxml/1"</span>&gt;</span><br></span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">children</span>&gt;</span><br></span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"dialog"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">"Label"</span> <span class="hljs-attr">wrapText</span>=<span class="hljs-string">"true"</span> /&gt;</span><br></span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">fx:id</span>=<span class="hljs-string">"displayPicture"</span> <span class="hljs-attr">fitHeight</span>=<span class="hljs-string">"99.0"</span> <span class="hljs-attr">fitWidth</span>=<span class="hljs-string">"99.0"</span> <span class="hljs-attr">pickOnBounds</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">preserveRatio</span>=<span class="hljs-string">"true"</span> /&gt;</span><br></span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">children</span>&gt;</span><br></span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">padding</span>&gt;</span><br></span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Insets</span> <span class="hljs-attr">bottom</span>=<span class="hljs-string">"15.0"</span> <span class="hljs-attr">left</span>=<span class="hljs-string">"5.0"</span> <span class="hljs-attr">right</span>=<span class="hljs-string">"5.0"</span> <span class="hljs-attr">top</span>=<span class="hljs-string">"15.0"</span> /&gt;</span><br></span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">padding</span>&gt;</span><br></span><span><span class="hljs-tag">&lt;/<span class="hljs-name">fx:root</span>&gt;</span><br></span></code></pre>
        <ol>
          <li>
            <p>Let’s explore the provided FXML files in Scene Builder.</p>
            <p>Running the tool brings up the main screen.
              Select <code>Open Project</code> &gt; <code>src/main/resources/view/MainWindow.fxml</code>. Inspect each control and its properties.</p>
            <p><a href="/guides/tutorials/images/javafx/SceneBuilder.png" target="_self"><img src="/guides/tutorials/images/javafx/SceneBuilder.png" alt class="img-fluid"></a></p>
          </li>
          <li>
            <p>On the right accordion pane, you can modify the properties of the control that you have selected. Try changing the various settings and see what they do!</p>
          </li>
          <li>
            <p>On the left accordion, you can see that we have set the controller class to <code>MainWindow</code>.
              We will get to that later.</p>
            <p><a href="/guides/tutorials/images/javafx/MainWindowController.png" target="_self"><img src="/guides/tutorials/images/javafx/MainWindowController.png" alt class="img-fluid"></a></p>
          </li>
          <li>
            <p>Let’s repeat the process for <code>DialogBox</code>.
              The main difference here is that DialogBox checks <code>Use fx:root construct</code> and <em>does not define a controller class</em>.</p>
            <p><a href="/guides/tutorials/images/javafx/DialogBoxController.png" target="_self"><img src="/guides/tutorials/images/javafx/DialogBoxController.png" alt class="img-fluid"></a></p>
          </li>
        </ol>
        <h2 id="using-controllers">Using Controllers<a class="fa fa-anchor" href="#using-controllers" onclick="event.stopPropagation()"></a></h2>
        <p>As part of the effort to separate the code handling Duke's logic and UI, let's <em>refactor</em> the UI-related code to its own class.
          We call these UI classes <em>controllers</em>.</p>
        <p>Let's implement the <code>MainWindow</code> controller class that we specified in <code>MainWindow.fxml</code>.</p>
        <p><strong>MainWindow.java</strong></p>
        <pre><code class="hljs java"><span><span class="hljs-keyword">import</span> javafx.fxml.FXML;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.control.Button;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.control.ScrollPane;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.control.TextField;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.image.Image;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.layout.AnchorPane;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.layout.VBox;<br></span><span><span class="hljs-comment">/**</span><br></span><span><span class="hljs-comment"> * Controller for MainWindow. Provides the layout for the other controls.</span><br></span><span><span class="hljs-comment"> */</span><br></span><span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainWindow</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AnchorPane</span> </span>{<br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-keyword">private</span> ScrollPane scrollPane;<br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-keyword">private</span> VBox dialogContainer;<br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-keyword">private</span> TextField userInput;<br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-keyword">private</span> Button sendButton;<br></span><span><br></span><span>    <span class="hljs-keyword">private</span> Duke duke;<br></span><span><br></span><span>    <span class="hljs-keyword">private</span> Image userImage = <span class="hljs-keyword">new</span> Image(<span class="hljs-keyword">this</span>.getClass().getResourceAsStream(<span class="hljs-string">"/images/DaUser.png"</span>));<br></span><span>    <span class="hljs-keyword">private</span> Image dukeImage = <span class="hljs-keyword">new</span> Image(<span class="hljs-keyword">this</span>.getClass().getResourceAsStream(<span class="hljs-string">"/images/DaDuke.png"</span>));<br></span><span><br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initialize</span><span class="hljs-params">()</span> </span>{<br></span><span>        scrollPane.vvalueProperty().bind(dialogContainer.heightProperty());<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setDuke</span><span class="hljs-params">(Duke d)</span> </span>{<br></span><span>        duke = d;<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-comment">/**</span><br></span><span><span class="hljs-comment">     * Creates two dialog boxes, one echoing user input and the other containing Duke's reply and then appends them to</span><br></span><span><span class="hljs-comment">     * the dialog container. Clears the user input after processing.</span><br></span><span><span class="hljs-comment">     */</span><br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserInput</span><span class="hljs-params">()</span> </span>{<br></span><span>        String input = userInput.getText();<br></span><span>        String response = duke.getResponse(input);<br></span><span>        dialogContainer.getChildren().addAll(<br></span><span>                DialogBox.getUserDialog(input, userImage),<br></span><span>                DialogBox.getDukeDialog(response, dukeImage)<br></span><span>        );<br></span><span>        userInput.clear();<br></span><span>    }<br></span><span>}<br></span></code></pre>
        <p>The <code>@FXML</code> annotation marks a <code>private</code> or <code>protected</code> member and makes it accessible to FXML despite its modifier.
          Without the annotation, we will have to make everything <code>public</code> and expose our UI to unwanted changes.</p>
        <p>The <code>FXMLLoader</code> will map the a control with a <code>fx:id</code> defined in FXML to a variable with the same name in its controller.
          Notice how in <code>MainWindow</code>, we can invoke <code>TextField#clear()</code> on <code>userInput</code> and access its content just as we did in the previous example.
          Similarly, methods like private methods like <code>handleUserInput</code> can be used in FXML when annotated by <code>@FXML</code>.</p>
        <h2 id="using-fxml-in-our-application">Using FXML in our application<a class="fa fa-anchor" href="#using-fxml-in-our-application" onclick="event.stopPropagation()"></a></h2>
        <p>Let's create a new <code>Main</code> class as the bridge between the existing logic in <code>Duke</code> and the UI in <code>MainWindow</code>.</p>
        <p><strong>Main.java</strong></p>
        <pre><code class="hljs java"><span><span class="hljs-keyword">import</span> java.io.IOException;<br></span><span><br></span><span><span class="hljs-keyword">import</span> javafx.application.Application;<br></span><span><span class="hljs-keyword">import</span> javafx.fxml.FXMLLoader;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.Scene;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.layout.AnchorPane;<br></span><span><span class="hljs-keyword">import</span> javafx.stage.Stage;<br></span><span><br></span><span><span class="hljs-comment">/**</span><br></span><span><span class="hljs-comment"> * A GUI for Duke using FXML.</span><br></span><span><span class="hljs-comment"> */</span><br></span><span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span> </span>{<br></span><span><br></span><span>    <span class="hljs-keyword">private</span> Duke duke = <span class="hljs-keyword">new</span> Duke();<br></span><span><br></span><span>    <span class="hljs-meta">@Override</span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">start</span><span class="hljs-params">(Stage stage)</span> </span>{<br></span><span>        <span class="hljs-keyword">try</span> {<br></span><span>            FXMLLoader fxmlLoader = <span class="hljs-keyword">new</span> FXMLLoader(Main<span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">getResource</span>("/<span class="hljs-title">view</span>/<span class="hljs-title">MainWindow</span>.<span class="hljs-title">fxml</span>"))</span>;<br></span><span>            AnchorPane ap = fxmlLoader.load();<br></span><span>            Scene scene = <span class="hljs-keyword">new</span> Scene(ap);<br></span><span>            stage.setScene(scene);<br></span><span>            fxmlLoader.&lt;MainWindow&gt;getController().setDuke(duke);<br></span><span>            stage.show();<br></span><span>        } <span class="hljs-keyword">catch</span> (IOException e) {<br></span><span>            e.printStackTrace();<br></span><span>        }<br></span><span>    }<br></span><span>}<br></span></code></pre>
        <p>Again, we can interact with the <code>AnchorPane</code> defined in the FXML as we would have if we created the <code>AnchorPane</code> ourselves.</p>
        <p>For our custom <code>DialogBox</code>, we did not define a controller so let's create a controller for it.</p>
        <p><strong>DialogBox.java</strong></p>
        <pre><code class="hljs java"><span><span class="hljs-keyword">import</span> java.io.IOException;<br></span><span><span class="hljs-keyword">import</span> java.util.Collections;<br></span><span><br></span><span><span class="hljs-keyword">import</span> javafx.collections.FXCollections;<br></span><span><span class="hljs-keyword">import</span> javafx.collections.ObservableList;<br></span><span><span class="hljs-keyword">import</span> javafx.fxml.FXML;<br></span><span><span class="hljs-keyword">import</span> javafx.fxml.FXMLLoader;<br></span><span><span class="hljs-keyword">import</span> javafx.geometry.Pos;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.Node;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.control.Label;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.image.Image;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.image.ImageView;<br></span><span><span class="hljs-keyword">import</span> javafx.scene.layout.HBox;<br></span><span><br></span><span><span class="hljs-comment">/**</span><br></span><span><span class="hljs-comment"> * An example of a custom control using FXML.</span><br></span><span><span class="hljs-comment"> * This control represents a dialog box consisting of an ImageView to represent the speaker's face and a label</span><br></span><span><span class="hljs-comment"> * containing text from the speaker.</span><br></span><span><span class="hljs-comment"> */</span><br></span><span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DialogBox</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HBox</span> </span>{<br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-keyword">private</span> Label dialog;<br></span><span>    <span class="hljs-meta">@FXML</span><br></span><span>    <span class="hljs-keyword">private</span> ImageView displayPicture;<br></span><span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">DialogBox</span><span class="hljs-params">(String text, Image img)</span> </span>{<br></span><span>        <span class="hljs-keyword">try</span> {<br></span><span>            FXMLLoader fxmlLoader = <span class="hljs-keyword">new</span> FXMLLoader(MainWindow<span class="hljs-class">.<span class="hljs-keyword">class</span>.<span class="hljs-title">getResource</span>("/<span class="hljs-title">view</span>/<span class="hljs-title">DialogBox</span>.<span class="hljs-title">fxml</span>"))</span>;<br></span><span>            fxmlLoader.setController(<span class="hljs-keyword">this</span>);<br></span><span>            fxmlLoader.setRoot(<span class="hljs-keyword">this</span>);<br></span><span>            fxmlLoader.load();<br></span><span>        } <span class="hljs-keyword">catch</span> (IOException e) {<br></span><span>            e.printStackTrace();<br></span><span>        }<br></span><span><br></span><span>        dialog.setText(text);<br></span><span>        displayPicture.setImage(img);<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-comment">/**</span><br></span><span><span class="hljs-comment">     * Flips the dialog box such that the ImageView is on the left and text on the right.</span><br></span><span><span class="hljs-comment">     */</span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">flip</span><span class="hljs-params">()</span> </span>{<br></span><span>        ObservableList&lt;Node&gt; tmp = FXCollections.observableArrayList(<span class="hljs-keyword">this</span>.getChildren());<br></span><span>        Collections.reverse(tmp);<br></span><span>        getChildren().setAll(tmp);<br></span><span>        setAlignment(Pos.TOP_LEFT);<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DialogBox <span class="hljs-title">getUserDialog</span><span class="hljs-params">(String text, Image img)</span> </span>{<br></span><span>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DialogBox(text, img);<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DialogBox <span class="hljs-title">getDukeDialog</span><span class="hljs-params">(String text, Image img)</span> </span>{<br></span><span>        <span class="hljs-keyword">var</span> db = <span class="hljs-keyword">new</span> DialogBox(text, img);<br></span><span>        db.flip();<br></span><span>        <span class="hljs-keyword">return</span> db;<br></span><span>    }<br></span><span>}<br></span></code></pre>
        <p>When we create a new instance of <code>DialogBox</code>, we set both the controller and root Node to <code>DialogBox</code>.
          From this point onwards we can interact with <code>DialogBox</code> as we have in the previous tutorials.</p>
        <p>The last change that we have to make is to point our <code>Launcher</code> class in the right direction:
          In <code>Launcher.java</code></p>
        <pre><code class="hljs java"><span><span class="hljs-comment">//...    </span><br></span><span>Application.launch(Main<span class="hljs-class">.<span class="hljs-keyword">class</span>, <span class="hljs-title">args</span>)</span>;<br></span><span><span class="hljs-comment">//...</span><br></span></code></pre>
        <h2 id="exercises">Exercises<a class="fa fa-anchor" href="#exercises" onclick="event.stopPropagation()"></a></h2>
        <ol>
          <li>Convert <code>MainWindow</code> to use the <code>fx:root</code> construct.</li>
          <li>Extend <code>MainWindow</code> to have a <code>Stage</code> as a root Node.</li>
          <li>Customize the appearance of the application further with CSS.</li>
        </ol>
        <hr>
        <p><strong>Authors:</strong></p>
        <ul>
          <li>Initial Version: Jeffry Lum</li>
        </ul>
      </div>


      <nav id="page-nav" class="navbar navbar-light bg-transparent">
        <div class="border-left-grey nav-inner position-sticky slim-scroll">

          <nav class="nav nav-pills flex-column my-0 small no-flex-wrap">
            <a class="nav-link py-1" href="#guides-for-se-student-projects">Guides for SE student projects »&#x200E;</a>
            <a class="nav-link py-1" href="#javafx-tutorial-part-4-using-fxml">JavaFX tutorial part 4 – Using FXML&#x200E;</a>
            <a class="nav-link py-1" href="#rebuilding-the-scene-using-fxml">Rebuilding the Scene using FXML&#x200E;</a>
            <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap">
              <a class="nav-link py-1" href="#using-controllers">Using Controllers&#x200E;</a>
              <a class="nav-link py-1" href="#using-fxml-in-our-application">Using FXML in our application&#x200E;</a>
              <a class="nav-link py-1" href="#exercises">Exercises&#x200E;</a>
            </nav>

          </nav>
        </div>
      </nav>
    </div>
    <footer>

      <div class="text-center">
        <small>[Powered by <img src="https://markbind.org/favicon.ico" width="30"> <a href="https://markbind.org/">MarkBind 2.14.1</a> on Fri, 5 Jun 2020, 20:38:15 GMT+8]</small></div>
    </footer>
  </div>
</body>
<script src="../markbind/js/vue.min.js"></script>
<script src="../markbind/js/vue-strap.min.js"></script>
<script src="../markbind/js/bootstrap-utility.min.js"></script>
<script src="../markbind/js/polyfill.min.js"></script>
<script src="../markbind/js/bootstrap-vue.min.js"></script>
<script>
  const baseUrl = '/guides'
  const enableSearch = true
</script>
<script src="../markbind/js/setup.js"></script>
<script src="../markbind/layouts/default/scripts.js"></script>

</html>